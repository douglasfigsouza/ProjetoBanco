
@model ProjetoBanco.MVC.ViewModels.AgenciaViewModel
<div class="row" id="divAlterAgencia">
    <h5>Alteração de Agência</h5>
    <hr />
    <div class="6">

            <div class="row">
                <div class="col s4">
                    <label for="agencia" class="col s12">Agencia</label>
                    <input type="text" name="agencia" id="agencia" class="col s12">
                    <button class="btn waves-effect waves-light col s12" type="button" name="getAgencia" id="btnGetAgencia">
                        Buscar
                        <i class="material-icons right">send</i>
                    </button>
                </div>
            </div>

    </div>
</div>
<div class="row" id="divAgenciaEditavel">
    <div class="col s6">
        <div class="row">
            <h6 class="col s6">Banco:</h6>
            <h6 class="col s6" id="banco"></h6>
        </div>
        <div class="row">
            <h6 class="col s6">Agencia:</h6>
            <h6 class="col s6" id="numAgencia"></h6>
        </div>
        @using (Html.BeginForm("AtualizaAgencia","Agencia"))
        {
            @Html.ValidationSummary(true)
            <div class="row">
                <input type="hidden" id="agenciaEditavel" name="agencia" />
                <input type="checkbox" id="ativo" name="ativo" checked />
                <label for="ativo">Ativo</label>
            </div>
            <div class="row">
                <button class="btn waves-effect waves-light" type="submit" name="atualizaAgencia">
                    Alterar
                    <i class="material-icons right">send</i>
                </button>
            </div>
        }
    </div>
</div>
<script>
    $(document).ready(function () {
        $("#divAgenciaEditavel").hide();
        $("#btnGetAgencia").click(function () {
            $("#divAlterAgencia").hide();
            var agencia = $("#agencia").val();
            $.ajax({
                type: "GET",
                url: "/Agencia/GetAgenciaByNum",
                data: {
                    agencia: agencia
                },
                success: function (dados) {
                    $("#agenciaEditavel").val(dados.agencia);
                    $("#banco").text(dados.banco);
                    $("#numAgencia").text(dados.agencia);
                    if (dados.ativo == 1) {
                        $("#ativo").prop('checked', true);
                        $("#ativo").val(true);
                    } else {
                        $("#ativo").prop('checked', false);
                        $("#ativo").val(false);
                    }
                    $("#divAgenciaEditavel").show();
                }, error() {

                }
            });
        });
    });
</script>